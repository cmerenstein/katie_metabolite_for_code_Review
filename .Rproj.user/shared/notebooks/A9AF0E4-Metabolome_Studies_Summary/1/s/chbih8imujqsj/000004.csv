"0","#retrive study names"
"0","study_names <- list.files(""/home/kmarquis/CVL_Fluid_Metabolomics_Analysis/Studies"")"
"0","#create empty list"
"0","datalist <- list()"
"0","#retrieve data from individual metabolomics studies and add to datalist"
"0","for (study in study_names) {"
"0","  "
"0","  path <- paste0(""/home/kmarquis/CVL_Fluid_Metabolomics_Analysis/Studies/"", study, ""/"", study, ""_data_summary.xlsx"")"
"0","  data <- read_xlsx(path = path, col_names = TRUE) %>%"
"0","    mutate_at(vars(""HDC"", ""Int"", ""LDC""), as.numeric) %>%"
"0","    select(Study:LDC)"
"0","  datalist[[study]] <- data"
"0","}"
"1",""
"1","-"
"1",""
"1","/"
"1","                                                                                                                                                "
"1",""
"1",""
"1","-"
"1",""
"1","/"
"1","                                                                                                                                                "
"1",""
"1",""
"1","-"
"1",""
"1","/"
"1","                                                                                                                                                "
"1",""
"1",""
"1","-"
"1",""
"1","/"
"1","                                                                                                                                                "
"1",""
"0","#combine data together, remove metabolites with unknown names, and prepare rules for search"
"0","lit_data <- rbindlist(datalist) %>%"
"0","  filter(!str_detect(Metabolite, 'unknown')) %>%"
"0","  mutate_at(., ""Metabolite"", tolower) %>%"
"0","  mutate(name_search = gsub(pattern = "" \\(.*\\)"", """", Metabolite)) %>%"
"0","  mutate(name_search = gsub(pattern = ""\\*"", """", name_search)) %>%"
"0","  mutate(name_search = gsub(pattern = ""^a_(.*)"", 'alpha-\\1', name_search)) %>%"
"0","  mutate(name_search = gsub(pattern = ""^alpha-(.*)"", '2-\\1', name_search)) %>%"
"0","  mutate(name_search = gsub(pattern = ""^a-(.*)"", '2-\\1', name_search)) %>%"
"0","  mutate(name_search = gsub(pattern = ""_"", "" "", name_search)) %>%"
"0","  mutate(name_search = gsub(pattern = ""isobar:\\s(.*\\D);.*"", ""\\1"", name_search)) %>%"
"0","  mutate(name_search = gsub(pattern = ""isobar:\\s(.*\\D), .*"", ""\\1"", name_search)) %>%"
"0","  mutate(name_search = gsub(pattern = "" \\[.*\\]"", """", name_search)) %>%"
"0","  mutate(name_search = gsub(pattern = ""inositol, (.*)"", ""\\1inositol"", name_search)) %>%"
"0","  mutate(name_search= gsub(pattern = ""(.*)-p$"", ""\\1-phosphate"", name_search)) %>%"
"0","  mutate(name_search = gsub(pattern = ""(^.*)\\s\\d"", ""\\1"", name_search)) %>%"
"0","  mutate(name_search = gsub(pattern = ""panthotenic acid"", ""pantothenic acid"", name_search)) %>%"
"0","  group_by(Study, Detection, name_search) %>% "
"0","  summarise_at(vars(HDC,Int,LDC), .funs = sum) %>% "
"0","  ungroup(.)"
"0","#write master dataframe to file for HMDB metabolite name correction"
"0","write_xlsx(lit_data, '/home/kmarquis/CVL_Fluid_Metabolomics_Analysis/Metabolome_Study_Summaries/Results/literature_metabolites.xlsx')"
